<main class="container mx-auto p-4">
    <div class="post bg-gray-700 p-6 rounded-lg shadow-lg">
        <article class="card">
            <div class="card-header flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-white">{{title}}</h2>
                <div class="text-sm text-gray-400">
                    Posted by {{user.username}} on {{formatDates createdAt}}
                </div>
            </div>
            <div class="card-body text-white">
                {{content}}
            </div>
        </article>

        {{#if comments.length}}
        <section class="card mt-6">
            <div class="card-header mb-4">
                <h3 class="text-xl font-semibold text-white">Comments</h3>
            </div>
            <div class="card-body">
                {{#each comments}}
                {{> comment }}
                {{/each}}
            </div>
        </section>
        {{/if}}

        {{#if logged_in}}
        <form id="new-comment-form" class="card mt-6 bg-gray-800 p-4 rounded-lg">
            <div class="card-header mb-4">
                <h3 class="text-xl font-semibold text-white">Add New Comment</h3>
            </div>
            <div class="card-body">
                <input type="hidden" name="post-id" value="{{id}}">
                <label class="form-label text-white" for="comment-body">Comment</label>
                <textarea name="comment-body" class="form-input w-full p-2 rounded-md bg-gray-900 text-white mt-2 mb-4" placeholder="Write a comment..." required></textarea>
                <button type="submit" class="btn bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">Submit</button>
            </div>
        </form>
        {{else}}
        <p class="mt-4 text-gray-400">You must be logged in to comment.</p>
        {{/if}}
    </div>

    <!-- Edit Comment Form -->
    <div id="edit-comment-modal" class="hidden fixed z-50 inset-0 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-gray-800 p-6 rounded-lg shadow-lg w-1/2">
                <h3 class="text-xl font-semibold text-white mb-4">Edit Comment</h3>
                <form id="edit-comment-form">
                    <input type="hidden" name="comment-id">
                    <textarea name="comment-text" class="form-input w-full p-2 rounded-md bg-gray-900 text-white mt-2 mb-4" required></textarea>
                    <button type="submit" class="btn bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">Save</button>
                    <button type="button" id="cancel-edit-btn" class="btn bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700">Cancel</button>
                </form>
            </div>
        </div>
    </div>
</main>

<script src="/js/comment.js"></script>
